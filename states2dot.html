<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
		  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>states2dot — TextUML</title>
<link rel="stylesheet" href="styles.css"/>
</head>
<body>
<h1><code>states2dot</code></h1>

<p>This script handles state diagrams.</p>

<h2>Table of Contents</h2>

<ul>
<li><a href="#elements">Elements</a>
	<ul>
	<li><a href="#state">State</a></li>
	<li><a href="#initial">Initial pseudostate</a></li>
	<li><a href="#final">Final state</a></li>
	<li><a href="#transition">Transition</a></li>
	<li><a href="#synchronization">Synchronization bar</a></li>
	<li><a href="#dynamic_choice">Dynamic Choice Point</a></li>
	<li><a href="#synch_state">Synch State</a></li>
	<li><a href="#decision">Decision</a></li>
	</ul></li>
<li><a href="unsupported">Unsupported notation</a></li>
</ul>


<h2 id="elements">Elements</h2>

<p>The following elements are supported.</p>


<h3 id="class">State</h3>

<pre><code>{<var>label</var> @<var>id</var>
--
<var>internal transition</var> @<var>id</var>
…
--
    <var>compartment name</var>
<var>internal transition</var> @<var>id</var>
    <var>continuation line</var>
…}</code></pre>

<p>A state may have zero or more compartments (in addition to the name compartment, which is always
present). Compartments are separated by <code>--</code> on a separate line. Each compartment may
have a compartment name, specified by an indented line immediately following the separator. The
remaining lines of a compartment specify the state’s internal transitions.</p>

<p>An internal transition may be specified on one or more lines. Only the first line is considered
when looking for the <code>@<var>id</var></code> and name. If an <code>@<var>id</var></code> is not
specifed explicitly, the name is extracted by taking the first word, delimited by whitespace or any
of <code>: ( ) « » &lt; &gt; { } [ ] /</code>.</p>

<p>Indented lines are considered to be continuation lines. The indentation is preserved. Note that
Graphviz will preserve spaces but skip tabs.</p>


<h3 id="initial">Initial pseudostate</h3>

<pre><code>(#) <var>label</var> @<var>id</var></code></pre>

<p>The label may be empty. If the label is empty and no explicit ID is specified, a sequential ID
will be autoassigned.</p>


<h3 id="final">Final state</h3>

<pre><code>((#)) <var>label</var> @<var>id</var></code></pre>

<p>The label may be empty. If the label is empty and no explicit ID is specified, a sequential ID
will be autoassigned.</p>


<h3 id="transition">Transition</h3>

<pre><code><var>state</var> [<var>guard</var>] ---&gt; [<var>label</var>] <var>state</var></code></pre>

<p>The guard condition and label are optional. The arrow must contain two or more of hyphen
characters; there is no upper limit.</p>


<h3 id="synchronization">Synchronization bar</h3>

<pre><code>--|== @<var>id</var> {
<var>branches</var>
}</code></pre>

<p>The fork icon <code>--|==</code> can alternatively be written as a join <code>==|--</code>; this
does not affect semantics which is determined solely by the number of incoming and outgoing
branches.</p>

<p>Within the braces, each line specifies a branch of the transition. An incoming branch is
specified like this:</p>

<pre><code><var>state</var> ---&gt; |</code></pre>

<p>An outgoing branch:</p>

<pre><code>| ---&gt; <var>state</var></code></pre>

<p>Arrows must contain two or more hyphen characters.</p>


<h3 id="dynamic_choice">Dynamic Choice Point</h3>

<pre><code>() <var>label</var> @<var>id</var></code></pre>

<p>The label may be empty. If the label is empty and no explicit ID is specified, a sequential ID
will be autoassigned.</p>


<h3 id="synch_state">Synch State</h3>

<pre><code>(<var>label</var> @<var>id</var>)</code></pre>

<p>The label may be empty. If the label is empty and no explicit ID is specified, a sequential ID
will be autoassigned.</p>

<p>Since the label of a synch state is a multiplicity, name autodetection does not make sense.
Always assign an ID explicitly. (This may be fixed in a later version by disabling name
autodetection and using an autogenerated sequential ID.)</p>


<h3 id="decision">Decision</h3>

<pre><code>&lt;&gt; <var>label</var> @<var>id</var></code></pre>

<p>The label may be empty. If the label is empty and no explicit ID is specified, a sequential ID
will be autoassigned.</p>


<h2 id="unsupported">Unsupported notation</h2>

<ul>
	<li>States are rendered as rectangles, without rounded corners.</li>
	<li>Composite states, including concurrent lanes, since Graphviz graphs cannot be nested.</li>
	<li>Action states, which should be rendered as rectangles with semicircles on the sides, are not
		supported.</li>
</ul>

</body>
</html>
